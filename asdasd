from playwright.sync_api import sync_playwright

def wait_for_url_pattern(page, pattern):
    return page.wait_for_function(f'''() => {{
        return window.location.href.startsWith("{pattern}")
    }}''')

with sync_playwright() as p:
    browser = p.chromium.launch()
    page = browser.new_page()
    page.goto('https://example.com')
    
    # Aguarde até que a URL comece com uma string específica
    wait_for_url_pattern(page, 'https://example.com/target')
    
    # A ação começa
    # ...
    
    browser.close()
